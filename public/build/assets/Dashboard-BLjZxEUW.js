import{_ as E,h as _,r as h,u as O,w as U,c as f,a as s,b as N,d as c,t as n,n as i,o as y,e as Y}from"./app-L7uT3k8P.js";const I={class:"section-wrap",dir:"rtl"},R={class:"final-result settings-final"},z={class:"kpi-grid"},D={class:"settings-card card--panel"},F={class:"settings-card__body"},C={class:"kpi-items"},q={class:"kpi-box"},A={class:"kpi-value"},B={class:"kpi-box"},V={class:"kpi-value"},H={class:"kpi-box"},G={class:"kpi-value"},J={class:"kpi-box"},$={class:"kpi-value"},K={class:"settings-card card--deposits"},L={class:"settings-card__body"},Q={class:"kpi-items"},W={class:"kpi-box"},X={class:"kpi-value"},Z={class:"kpi-box"},ss={class:"settings-card card--pending"},ts={class:"settings-card__body"},es={class:"kpi-items"},as={class:"kpi-box"},ls={class:"kpi-value"},ns={class:"kpi-box"},is={class:"kpi-value"},os={class:"settings-card card--new"},ds={class:"settings-card__body"},rs={class:"kpi-items"},cs={class:"kpi-box"},vs={class:"kpi-value"},us={class:"kpi-box"},ps={class:"kpi-value"},_s={class:"settings-card card--renew"},hs={class:"settings-card__body"},fs={class:"kpi-items"},ys={class:"kpi-box"},ks={class:"kpi-value"},bs={class:"kpi-box"},gs={class:"kpi-value"},Ps={key:0,class:"loading-hint"},ms={__name:"Dashboard",setup(ws){typeof _.loadPersian=="function"&&_.loadPersian({usePersianDigits:!1,dialect:"persian-modern"});const v=h(!0),e=h({panelStatus:{partnersTotal:0,usersTotal:0,usersOnline:0,usersExpired:0},newUsers:{today:0,vsYesterdayPct:0,thisMonth:0,vsPrevMonthPct:0},renewals:{today:0,vsYesterdayPct:0,thisMonth:0,vsPrevMonthPct:0},deposits:{thisMonthToman:0,vsPrevMonthPct:0},pending:{deposits:0,partnerRequests:0},meta:{generatedAt:"",pollSeconds:60}});function k(){const t=_().utcOffset(210),u=t.clone().startOf("day"),m=t.clone().endOf("day"),w=u.clone().subtract(1,"day"),M=u.clone().subtract(1,"second"),p=t.clone().startOf("jMonth").startOf("day"),x=t.clone(),S=p.clone().subtract(1,"jMonth").startOf("jMonth").startOf("day"),T=p.clone().subtract(1,"second"),o=j=>j.toDate().toISOString();return{jtodayStart:o(u),jtodayEnd:o(m),jyesterdayStart:o(w),jyesterdayEnd:o(M),jmonthStart:o(p),jmonthEnd:o(x),jprevMonthStart:o(S),jprevMonthEnd:o(T)}}async function b(){try{v.value=!0;const l=k(),{data:t}=await Y.get("/admin/dashboard/cards",{params:l});e.value=t}catch(l){console.error(l)}finally{v.value=!1}}const{poll60:g}=O();U(g,b,{immediate:!0});function a(l){try{return new Intl.NumberFormat("fa-IR").format(l??0)}catch{return String(l??0)}}function P(l){return`${a(l)} تومان`}function d(l){return l>0?"pos":l<0?"neg":"neu"}function r(l){return l>0?"fa-arrow-up":l<0?"fa-arrow-down":"fa-minus"}return(l,t)=>(y(),f("div",I,[t[17]||(t[17]=s("div",{class:"billing-root",dir:"ltr"},[s("h3",{class:"topup-title"},"داشبورد")],-1)),s("div",R,[s("div",z,[s("section",D,[t[4]||(t[4]=s("header",{class:"settings-card__header plain"},[s("div",{class:"h-left"},[s("i",{class:"fas fa-list",style:{color:"silver"}}),s("span",null,"صورت وضعیت پنل")])],-1)),s("div",F,[s("div",C,[s("div",q,[t[0]||(t[0]=s("div",{class:"kpi-label"},[s("i",{class:"fas fa-users",style:{"margin-left":"5px","font-size":"14px"}}),c(" همکاران")],-1)),s("div",A,n(a(e.value.panelStatus.partnersTotal)),1)]),s("div",B,[t[1]||(t[1]=s("div",{class:"kpi-label"},[s("i",{class:"fas fa-users",style:{"margin-left":"5px","font-size":"14px"}}),c(" کاربران")],-1)),s("div",V,n(a(e.value.panelStatus.usersTotal)),1)]),s("div",H,[t[2]||(t[2]=s("div",{class:"kpi-label"},[s("i",{class:"fas fa-circle",style:{color:"green","margin-left":"5px","font-size":"8px"}}),c(" کاربران آنلاین")],-1)),s("div",G,n(a(e.value.panelStatus.usersOnline)),1)]),s("div",J,[t[3]||(t[3]=s("div",{class:"kpi-label"},[s("i",{class:"fas fa-circle",style:{color:"red","margin-left":"5px","font-size":"8px"}}),c(" کاربران منقضی")],-1)),s("div",$,n(a(e.value.panelStatus.usersExpired)),1)])])])]),s("section",K,[t[7]||(t[7]=s("header",{class:"settings-card__header plain"},[s("div",{class:"h-left"},[s("i",{class:"fas fa-coins",style:{color:"gold"}}),s("span",null,"واریزی‌ها")])],-1)),s("div",L,[s("div",Q,[s("div",W,[t[5]||(t[5]=s("div",{class:"kpi-label"},"ماه جاری",-1)),s("div",X,n(P(e.value.deposits.thisMonthToman)),1)]),s("div",Z,[t[6]||(t[6]=s("div",{class:"kpi-label"},"مقایسه با ماه قبل",-1)),s("div",{class:i(["delta",d(e.value.deposits.vsPrevMonthPct)])},[s("i",{class:i(["fas",r(e.value.deposits.vsPrevMonthPct)])},null,2),s("span",null,n(a(e.value.deposits.vsPrevMonthPct))+" ٪",1)],2)])])])]),s("section",ss,[t[10]||(t[10]=s("header",{class:"settings-card__header plain"},[s("div",{class:"h-left"},[s("i",{class:"fas fa-hourglass-half",style:{color:"burlywood"}}),s("span",null,"در انتظار تأیید")])],-1)),s("div",ts,[s("div",es,[s("div",as,[t[8]||(t[8]=s("div",{class:"kpi-label"},"واریزی",-1)),s("div",ls,n(a(e.value.pending.deposits)),1)]),s("div",ns,[t[9]||(t[9]=s("div",{class:"kpi-label"},"درخواست نمایندگی",-1)),s("div",is,n(a(e.value.pending.partnerRequests)),1)])])])]),s("section",os,[t[13]||(t[13]=s("header",{class:"settings-card__header plain"},[s("div",{class:"h-left"},[s("i",{class:"fas fa-user-plus",style:{color:"greenyellow"}}),s("span",null,"کاربران جدید")])],-1)),s("div",ds,[s("div",rs,[s("div",cs,[t[11]||(t[11]=s("div",{class:"kpi-label"},"امروز",-1)),s("div",vs,n(a(e.value.newUsers.today)),1),s("div",{class:i(["delta",d(e.value.newUsers.vsYesterdayPct)])},[s("i",{class:i(["fas",r(e.value.newUsers.vsYesterdayPct)])},null,2),s("span",null,n(a(e.value.newUsers.vsYesterdayPct))+" ٪ نسبت به دیروز",1)],2)]),s("div",us,[t[12]||(t[12]=s("div",{class:"kpi-label"},"ماه جاری",-1)),s("div",ps,n(a(e.value.newUsers.thisMonth)),1),s("div",{class:i(["delta",d(e.value.newUsers.vsPrevMonthPct)])},[s("i",{class:i(["fas",r(e.value.newUsers.vsPrevMonthPct)])},null,2),s("span",null,n(a(e.value.newUsers.vsPrevMonthPct))+" ٪ نسبت به ماه قبل",1)],2)])])])]),s("section",_s,[t[16]||(t[16]=s("header",{class:"settings-card__header plain"},[s("div",{class:"h-left"},[s("i",{class:"fas fa-user-check",style:{color:"greenyellow"}}),s("span",null,"تمدید کاربران ")])],-1)),s("div",hs,[s("div",fs,[s("div",ys,[t[14]||(t[14]=s("div",{class:"kpi-label"},"امروز",-1)),s("div",ks,n(a(e.value.renewals.today)),1),s("div",{class:i(["delta",d(e.value.renewals.vsYesterdayPct)])},[s("i",{class:i(["fas",r(e.value.renewals.vsYesterdayPct)])},null,2),s("span",null,n(a(e.value.renewals.vsYesterdayPct))+" ٪ نسبت به دیروز",1)],2)]),s("div",bs,[t[15]||(t[15]=s("div",{class:"kpi-label"},"ماه جاری",-1)),s("div",gs,n(a(e.value.renewals.thisMonth)),1),s("div",{class:i(["delta",d(e.value.renewals.vsPrevMonthPct)])},[s("i",{class:i(["fas",r(e.value.renewals.vsPrevMonthPct)])},null,2),s("span",null,n(a(e.value.renewals.vsPrevMonthPct))+" ٪ نسبت به ماه قبل",1)],2)])])])])]),v.value?(y(),f("div",Ps,"در حال به‌روزرسانی کارت‌ها…")):N("",!0)])]))}},xs=E(ms,[["__scopeId","data-v-d3c5f8d8"]]);export{xs as default};
