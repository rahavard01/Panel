import{_ as T,h as p,r as h,u as j,w as E,c as O,a as s,b as c,t as n,n as i,o as U,d as Y}from"./app-Bfhg9hvD.js";const I={class:"section-wrap",dir:"rtl"},N={class:"final-result settings-final"},R={class:"kpi-grid"},z={class:"settings-card card--panel"},D={class:"settings-card__body"},F={class:"kpi-items"},q={class:"kpi-box"},A={class:"kpi-value"},B={class:"kpi-box"},C={class:"kpi-value"},H={class:"kpi-box"},V={class:"kpi-value"},G={class:"kpi-box"},J={class:"kpi-value"},$={class:"settings-card card--deposits"},K={class:"settings-card__body"},L={class:"kpi-items"},Q={class:"kpi-box"},W={class:"kpi-value"},X={class:"kpi-box"},Z={class:"settings-card card--pending"},ss={class:"settings-card__body"},ts={class:"kpi-items"},es={class:"kpi-box"},as={class:"kpi-value"},ls={class:"kpi-box"},ns={class:"kpi-value"},is={class:"settings-card card--new"},os={class:"settings-card__body"},ds={class:"kpi-items"},rs={class:"kpi-box"},cs={class:"kpi-value"},vs={class:"kpi-box"},us={class:"kpi-value"},ps={class:"settings-card card--renew"},_s={class:"settings-card__body"},hs={class:"kpi-items"},fs={class:"kpi-box"},ys={class:"kpi-value"},ks={class:"kpi-box"},bs={class:"kpi-value"},gs={__name:"Dashboard",setup(Ps){typeof p.loadPersian=="function"&&p.loadPersian({usePersianDigits:!1,dialect:"persian-modern"});const _=h(!0),e=h({panelStatus:{partnersTotal:0,usersTotal:0,usersOnline:0,usersExpired:0},newUsers:{today:0,vsYesterdayPct:0,thisMonth:0,vsPrevMonthPct:0},renewals:{today:0,vsYesterdayPct:0,thisMonth:0,vsPrevMonthPct:0},deposits:{thisMonthToman:0,vsPrevMonthPct:0},pending:{deposits:0,partnerRequests:0},meta:{generatedAt:"",pollSeconds:60}});function f(){const t=p().utcOffset(210),v=t.clone().startOf("day"),g=t.clone().endOf("day"),P=v.clone().subtract(1,"day"),w=v.clone().subtract(1,"second"),u=t.clone().startOf("jMonth").startOf("day"),m=t.clone(),M=u.clone().subtract(1,"jMonth").startOf("jMonth").startOf("day"),x=u.clone().subtract(1,"second"),o=S=>S.toDate().toISOString();return{jtodayStart:o(v),jtodayEnd:o(g),jyesterdayStart:o(P),jyesterdayEnd:o(w),jmonthStart:o(u),jmonthEnd:o(m),jprevMonthStart:o(M),jprevMonthEnd:o(x)}}async function y(){try{_.value=!0;const l=f(),{data:t}=await Y.get("/admin/dashboard/cards",{params:l});e.value=t}catch(l){console.error(l)}finally{_.value=!1}}const{poll60:k}=j();E(k,y,{immediate:!0});function a(l){try{return new Intl.NumberFormat("fa-IR").format(l??0)}catch{return String(l??0)}}function b(l){return`${a(l)} تومان`}function d(l){return l>0?"pos":l<0?"neg":"neu"}function r(l){return l>0?"fa-arrow-up":l<0?"fa-arrow-down":"fa-minus"}return(l,t)=>(U(),O("div",I,[t[17]||(t[17]=s("div",{class:"billing-root",dir:"ltr"},[s("h3",{class:"topup-title"},"داشبورد")],-1)),s("div",N,[s("div",R,[s("section",z,[t[4]||(t[4]=s("header",{class:"settings-card__header plain"},[s("div",{class:"h-left"},[s("i",{class:"fas fa-list",style:{color:"silver"}}),s("span",null,"صورت وضعیت پنل")])],-1)),s("div",D,[s("div",F,[s("div",q,[t[0]||(t[0]=s("div",{class:"kpi-label"},[s("i",{class:"fas fa-users",style:{"margin-left":"5px","font-size":"14px"}}),c(" همکاران")],-1)),s("div",A,n(a(e.value.panelStatus.partnersTotal)),1)]),s("div",B,[t[1]||(t[1]=s("div",{class:"kpi-label"},[s("i",{class:"fas fa-users",style:{"margin-left":"5px","font-size":"14px"}}),c(" کاربران")],-1)),s("div",C,n(a(e.value.panelStatus.usersTotal)),1)]),s("div",H,[t[2]||(t[2]=s("div",{class:"kpi-label"},[s("i",{class:"fas fa-circle",style:{color:"green","margin-left":"5px","font-size":"8px"}}),c(" کاربران آنلاین")],-1)),s("div",V,n(a(e.value.panelStatus.usersOnline)),1)]),s("div",G,[t[3]||(t[3]=s("div",{class:"kpi-label"},[s("i",{class:"fas fa-circle",style:{color:"red","margin-left":"5px","font-size":"8px"}}),c(" کاربران منقضی")],-1)),s("div",J,n(a(e.value.panelStatus.usersExpired)),1)])])])]),s("section",$,[t[7]||(t[7]=s("header",{class:"settings-card__header plain"},[s("div",{class:"h-left"},[s("i",{class:"fas fa-coins",style:{color:"gold"}}),s("span",null,"واریزی‌ها")])],-1)),s("div",K,[s("div",L,[s("div",Q,[t[5]||(t[5]=s("div",{class:"kpi-label"},"ماه جاری",-1)),s("div",W,n(b(e.value.deposits.thisMonthToman)),1)]),s("div",X,[t[6]||(t[6]=s("div",{class:"kpi-label"},"مقایسه با ماه قبل",-1)),s("div",{class:i(["delta",d(e.value.deposits.vsPrevMonthPct)])},[s("i",{class:i(["fas",r(e.value.deposits.vsPrevMonthPct)])},null,2),s("span",null,n(a(e.value.deposits.vsPrevMonthPct))+" ٪",1)],2)])])])]),s("section",Z,[t[10]||(t[10]=s("header",{class:"settings-card__header plain"},[s("div",{class:"h-left"},[s("i",{class:"fas fa-hourglass-half",style:{color:"burlywood"}}),s("span",null,"در انتظار تأیید")])],-1)),s("div",ss,[s("div",ts,[s("div",es,[t[8]||(t[8]=s("div",{class:"kpi-label"},"واریزی",-1)),s("div",as,n(a(e.value.pending.deposits)),1)]),s("div",ls,[t[9]||(t[9]=s("div",{class:"kpi-label"},"درخواست نمایندگی",-1)),s("div",ns,n(a(e.value.pending.partnerRequests)),1)])])])]),s("section",is,[t[13]||(t[13]=s("header",{class:"settings-card__header plain"},[s("div",{class:"h-left"},[s("i",{class:"fas fa-user-plus",style:{color:"greenyellow"}}),s("span",null,"کاربران جدید")])],-1)),s("div",os,[s("div",ds,[s("div",rs,[t[11]||(t[11]=s("div",{class:"kpi-label"},"امروز",-1)),s("div",cs,n(a(e.value.newUsers.today)),1),s("div",{class:i(["delta",d(e.value.newUsers.vsYesterdayPct)])},[s("i",{class:i(["fas",r(e.value.newUsers.vsYesterdayPct)])},null,2),s("span",null,n(a(e.value.newUsers.vsYesterdayPct))+" ٪ نسبت به دیروز",1)],2)]),s("div",vs,[t[12]||(t[12]=s("div",{class:"kpi-label"},"ماه جاری",-1)),s("div",us,n(a(e.value.newUsers.thisMonth)),1),s("div",{class:i(["delta",d(e.value.newUsers.vsPrevMonthPct)])},[s("i",{class:i(["fas",r(e.value.newUsers.vsPrevMonthPct)])},null,2),s("span",null,n(a(e.value.newUsers.vsPrevMonthPct))+" ٪ نسبت به ماه قبل",1)],2)])])])]),s("section",ps,[t[16]||(t[16]=s("header",{class:"settings-card__header plain"},[s("div",{class:"h-left"},[s("i",{class:"fas fa-user-check",style:{color:"greenyellow"}}),s("span",null,"تمدید کاربران ")])],-1)),s("div",_s,[s("div",hs,[s("div",fs,[t[14]||(t[14]=s("div",{class:"kpi-label"},"امروز",-1)),s("div",ys,n(a(e.value.renewals.today)),1),s("div",{class:i(["delta",d(e.value.renewals.vsYesterdayPct)])},[s("i",{class:i(["fas",r(e.value.renewals.vsYesterdayPct)])},null,2),s("span",null,n(a(e.value.renewals.vsYesterdayPct))+" ٪ نسبت به دیروز",1)],2)]),s("div",ks,[t[15]||(t[15]=s("div",{class:"kpi-label"},"ماه جاری",-1)),s("div",bs,n(a(e.value.renewals.thisMonth)),1),s("div",{class:i(["delta",d(e.value.renewals.vsPrevMonthPct)])},[s("i",{class:i(["fas",r(e.value.renewals.vsPrevMonthPct)])},null,2),s("span",null,n(a(e.value.renewals.vsPrevMonthPct))+" ٪ نسبت به ماه قبل",1)],2)])])])])])])]))}},ms=T(gs,[["__scopeId","data-v-75e38804"]]);export{ms as default};
